=== Debugging Executor Live ===

1. Fetching Tools...
[ToolService] Fetching all tools...
[API Handler] Validating/Fetching spec: https://api.aprendizagem-busca-curso.dev.senai.br/api/docs-json
[API Handler] Spec fetched successfully: https://api.aprendizagem-busca-curso.dev.senai.br/api/docs-json
[API Handler] Resolved Effective Base URL for 'DN': https://api.aprendizagem-busca-curso.dev.senai.br
Available Tools: 57
 - register_api: Register a new API. Can provide OpenAPI Spec URL O...
 - register_db: Register a new Database....
 - dn_authcontroller_session: Login de Usuário...
 - dn_usercontroller_inputuser: Inserir usuários via Excel...
 - dn_usercontroller_sendemailuser: Enviar e-mail para os usuários...
 - dn_usercontroller_createuser: Criar usuários...
 - dn_usercontroller_updateuser: Atualizar usuários...
 - dn_usercontroller_changestatususer: Inativar / ativar usuários...
 - dn_usercontroller_listuser: Listar usuários...
 - dn_usercontroller_viewuser: Dados do usuários...
 - dn_usercontroller_deleteuser: Deleta usuários...
 - dn_companiescontroller_getcompanyprofile: Obter perfil consolidado da empresa...
 - dn_companiescontroller_getcourserecommendations: Obter recomendações de cursos por CNAEs...
 - dn_companiescontroller_getsenaiunits: Listar unidades SENAI...
 - dn_coursescontroller_getcoursedetails: Detalhes de um curso específico...
 - dn_coursescontroller_searchorderrecommendedcourses: Buscar cursos recomendados por localização...
 - dn_schoolscontroller_getshools: Lista escolas disponíveis...
 - dn_schoolscontroller_getschoolsbysenaiuser: Lista escolas com base no usuário...
 - dn_schoolscontroller_getfilters: Retorna os filtros disponíveis...
 - dn_recreateschoolscontroller_recreateshools: Recriar as escolas no banco de dados...
 - dn_quotacontroller_manualquotacalculation: Calcula a cota manualmente...
 - dn_quotacontroller_updatequota: Atualiza os dados de uma cota de aprendizagem de u...
 - dn_quotacontroller_findquota: Encontra os dados de uma cota de aprendizagem de u...
 - dn_cbofamilycontroller_findcbo: Lista as famílias CBO...
 - dn_enterprisecontroller_getenterprise: Busca dados de uma empresa...
 - dn_enterprisecontroller_listenterprise: Listar empresas...
 - dn_requestcontroller_createrequest: Solicitação de interesse em cursos...
 - dn_requestcontroller_viewrequest: Visualizar a solicitação de interesse em cursos...
 - dn_requestcontroller_listrequest: Lista as solicitações de interesse em cursos...
 - dn_requestcontroller_responserequest: Responder a solicitação de interesse em cursos...
 - dn_dashboardcontroller_getkpis: Kpis do dashboard...
 - dn_dashboardcontroller_getevolutionlearners: Evolução de aprendizagem...
 - dn_dashboardcontroller_getcontractscapacity: Capacidade X contratos...
 - dn_dashboardcontroller_getcompaniesserved: Empresas atendidas...
 - dn_dashboardcontroller_getcnaebystate: CNAEs atendidos por estado...
 - dn_dashboardcontroller_getrequestinterests: Empresas interessadas...
 - dn_dashboardcontroller_gettotalrequests: Total de solicitações de empresas interessadas...
 - dn_dashboardcontroller_getrequestsbylocation: Localização dos interessadas...
 - dn_dashboardcontroller_getresponsetime: Tempo de resposta para empresas interessadas...
 - dn_dashboardcontroller_gettopcourses: Top 10 cursos mais requisitados...
 - dn_dashboardcontroller_getcoursesstatus: Status de cursos aprovados e vencidos...
 - dn_dashboardcontroller_getquotaandcontactsummary: Resumo de cotas e contatos...
 - dn_dashboardcontroller_getindustrialpotential: Potencial industrial por cidade...
 - dn_dashboardcontroller_getcitieswithoutschools: Cidades sem unidade SENAI com solicitações...
 - dn_dashboardcontroller_gettopcourseswithoutschools: Top 5 cursos solicitados em cidades sem unidade SE...
 - dn_dashboardcontroller_gettimelinewithoutschools: Linha do tempo mensal de solicitações sem unidade ...
 - dn_dashboardcontroller_getcitieswithindustries: Cidades com indústrias mas sem unidade SENAI...
 - dn_dashboardcontroller_getevasionsummary: Resumo de potencial industrial em cidades sem unid...
 - dn_dashboardunitadmcontroller_getactivecontractsbyunit: Contratos ativos na unidade...
 - dn_dashboardunitadmcontroller_getactivecontractsbyentrydate: Contratos ativos por data de entrada...
 - dn_dashboardunitadmcontroller_getexpiringcontracts: Contratos vencendo...
 - dn_dashboardunitadmcontroller_getcompanieswithrequests: Empresas que enviaram solicitações...
 - dn_dashboardunitadmcontroller_getrequestedcourses: Cursos solicitados...
 - dn_dashboardunitadmcontroller_getactivecontractstimeline: Timeline de contratos ativos...
 - dn_analyticscontroller_logrecommendation: Registrar recomendação gerada...
 - dn_analyticscontroller_checkbias: Verificar viés em recomendações...
 - dn_analyticscontroller_getbiassignals: Listar sinais de viés...

2. Running Executor with query: "quais cursos tem em diadema?"
[Executor] Starting execution with 0 tools. Model: undefined
Execution Failed: TypeError: (history || []).map is not a function
    at ExecutorAgent.prepareHistory (file:///Users/giovanics/Documents/Reposto%CC%81rios/DynamicFront/server/agents/Executor.js:312:44)
    at ExecutorAgent.execute (file:///Users/giovanics/Documents/Reposto%CC%81rios/DynamicFront/server/agents/Executor.js:21:31)
    at run (file:///Users/giovanics/Documents/Reposto%CC%81rios/DynamicFront/server/scripts/debug_executor_live.js:25:39)
