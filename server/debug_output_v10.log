=== Debugging Executor Live ===

1. Fetching Tools...
[ToolService] Fetching all tools...
[API Handler] Validating/Fetching spec: https://api.aprendizagem-busca-curso.dev.senai.br/api/docs-json
[API Handler] Spec fetched successfully: https://api.aprendizagem-busca-curso.dev.senai.br/api/docs-json
[API Handler] Resolved Effective Base URL for 'DN': https://api.aprendizagem-busca-curso.dev.senai.br
Available Tools: 57
 - register_api: Register a new API. Can provide OpenAPI Spec URL O...
 - register_db: Register a new Database....
 - dn_authcontroller_session: Login de Usu√°rio...
 - dn_usercontroller_inputuser: Inserir usu√°rios via Excel...
 - dn_usercontroller_sendemailuser: Enviar e-mail para os usu√°rios...
 - dn_usercontroller_createuser: Criar usu√°rios...
 - dn_usercontroller_updateuser: Atualizar usu√°rios...
 - dn_usercontroller_changestatususer: Inativar / ativar usu√°rios...
 - dn_usercontroller_listuser: Listar usu√°rios...
 - dn_usercontroller_viewuser: Dados do usu√°rios...
 - dn_usercontroller_deleteuser: Deleta usu√°rios...
 - dn_companiescontroller_getcompanyprofile: Obter perfil consolidado da empresa...
 - dn_companiescontroller_getcourserecommendations: Obter recomenda√ß√µes de cursos por CNAEs...
 - dn_companiescontroller_getsenaiunits: Listar unidades SENAI...
 - dn_coursescontroller_getcoursedetails: Detalhes de um curso espec√≠fico...
 - dn_coursescontroller_searchorderrecommendedcourses: Buscar cursos recomendados por localiza√ß√£o...
 - dn_schoolscontroller_getshools: Lista escolas dispon√≠veis...
 - dn_schoolscontroller_getschoolsbysenaiuser: Lista escolas com base no usu√°rio...
 - dn_schoolscontroller_getfilters: Retorna os filtros dispon√≠veis...
 - dn_recreateschoolscontroller_recreateshools: Recriar as escolas no banco de dados...
 - dn_quotacontroller_manualquotacalculation: Calcula a cota manualmente...
 - dn_quotacontroller_updatequota: Atualiza os dados de uma cota de aprendizagem de u...
 - dn_quotacontroller_findquota: Encontra os dados de uma cota de aprendizagem de u...
 - dn_cbofamilycontroller_findcbo: Lista as fam√≠lias CBO...
 - dn_enterprisecontroller_getenterprise: Busca dados de uma empresa...
 - dn_enterprisecontroller_listenterprise: Listar empresas...
 - dn_requestcontroller_createrequest: Solicita√ß√£o de interesse em cursos...
 - dn_requestcontroller_viewrequest: Visualizar a solicita√ß√£o de interesse em cursos...
 - dn_requestcontroller_listrequest: Lista as solicita√ß√µes de interesse em cursos...
 - dn_requestcontroller_responserequest: Responder a solicita√ß√£o de interesse em cursos...
 - dn_dashboardcontroller_getkpis: Kpis do dashboard...
 - dn_dashboardcontroller_getevolutionlearners: Evolu√ß√£o de aprendizagem...
 - dn_dashboardcontroller_getcontractscapacity: Capacidade X contratos...
 - dn_dashboardcontroller_getcompaniesserved: Empresas atendidas...
 - dn_dashboardcontroller_getcnaebystate: CNAEs atendidos por estado...
 - dn_dashboardcontroller_getrequestinterests: Empresas interessadas...
 - dn_dashboardcontroller_gettotalrequests: Total de solicita√ß√µes de empresas interessadas...
 - dn_dashboardcontroller_getrequestsbylocation: Localiza√ß√£o dos interessadas...
 - dn_dashboardcontroller_getresponsetime: Tempo de resposta para empresas interessadas...
 - dn_dashboardcontroller_gettopcourses: Top 10 cursos mais requisitados...
 - dn_dashboardcontroller_getcoursesstatus: Status de cursos aprovados e vencidos...
 - dn_dashboardcontroller_getquotaandcontactsummary: Resumo de cotas e contatos...
 - dn_dashboardcontroller_getindustrialpotential: Potencial industrial por cidade...
 - dn_dashboardcontroller_getcitieswithoutschools: Cidades sem unidade SENAI com solicita√ß√µes...
 - dn_dashboardcontroller_gettopcourseswithoutschools: Top 5 cursos solicitados em cidades sem unidade SE...
 - dn_dashboardcontroller_gettimelinewithoutschools: Linha do tempo mensal de solicita√ß√µes sem unidade ...
 - dn_dashboardcontroller_getcitieswithindustries: Cidades com ind√∫strias mas sem unidade SENAI...
 - dn_dashboardcontroller_getevasionsummary: Resumo de potencial industrial em cidades sem unid...
 - dn_dashboardunitadmcontroller_getactivecontractsbyunit: Contratos ativos na unidade...
 - dn_dashboardunitadmcontroller_getactivecontractsbyentrydate: Contratos ativos por data de entrada...
 - dn_dashboardunitadmcontroller_getexpiringcontracts: Contratos vencendo...
 - dn_dashboardunitadmcontroller_getcompanieswithrequests: Empresas que enviaram solicita√ß√µes...
 - dn_dashboardunitadmcontroller_getrequestedcourses: Cursos solicitados...
 - dn_dashboardunitadmcontroller_getactivecontractstimeline: Timeline de contratos ativos...
 - dn_analyticscontroller_logrecommendation: Registrar recomenda√ß√£o gerada...
 - dn_analyticscontroller_checkbias: Verificar vi√©s em recomenda√ß√µes...
 - dn_analyticscontroller_getbiassignals: Listar sinais de vi√©s...

2. Running Executor with query: "quais cursos tem em diadema?"
[Executor] Starting execution with 57 tools. Model: gemini-2.0-flash
[ModelManager] Initialized.
[ModelManager] Generating content with gemini-2.0-flash (Provider: gemini)...
[ModelManager] Primary execution failed for gemini-2.0-flash. Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent: [429 Too Many Requests] You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash
Please retry in 16.40059835s. [{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"16s"}]
[ModelManager] ‚ö†Ô∏è gemini-2.0-flash hit Rate Limit/Quota. Initiating Failover...
[ModelManager] üîÑ Failing over to: gemini-2.0-flash-lite (gemini)
[ModelManager] Fallback (gemini-2.0-flash-lite) failed: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent: [429 Too Many Requests] You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-lite
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-lite
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-lite
Please retry in 16.024696602s. [{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash-lite","location":"global"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash-lite"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash-lite"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"16s"}]
[ModelManager] üîÑ Failing over to: llama-3.3-70b-versatile (groq)
[Executor] üõ†Ô∏è Detected text-based tool call for 'dn_schoolscontroller_getschoolsbysenaiuser'. Parsing...
[Executor] >>> Calling Tool: dn_schoolscontroller_getschoolsbysenaiuser
[API Exec] Authenticating via https://api.aprendizagem-busca-curso.dev.senai.br/api/auth/session...
[API Exec] Auth success. Token found.
[API Exec] get https://api.aprendizagem-busca-curso.dev.senai.br/api/schools/user
[API Headers] {"Content-Type":"application/json","Authorization":"[REDACTED]"}
[Executor] üîÑ Empty result detected. Suggesting normalization retry for: Diadema, S√£o Paulo
[ModelManager] Generating content with gemini-2.0-flash (Provider: gemini)...
[ModelManager] Primary execution failed for gemini-2.0-flash. Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent: [429 Too Many Requests] You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash
Please retry in 11.864193983s. [{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"model":"gemini-2.0-flash","location":"global"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"11s"}]
[ModelManager] ‚ö†Ô∏è gemini-2.0-flash hit Rate Limit/Quota. Initiating Failover...
[ModelManager] üîÑ Failing over to: gemini-2.0-flash-lite (gemini)
[ModelManager] Fallback (gemini-2.0-flash-lite) failed: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent: [429 Too Many Requests] You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-lite
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-lite
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-lite
Please retry in 10.207166893s. [{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Learn more about Gemini API quotas","url":"https://ai.google.dev/gemini-api/docs/rate-limits"}]},{"@type":"type.googleapis.com/google.rpc.QuotaFailure","violations":[{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count","quotaId":"GenerateContentInputTokensPerModelPerMinute-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash-lite"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerMinutePerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash-lite"}},{"quotaMetric":"generativelanguage.googleapis.com/generate_content_free_tier_requests","quotaId":"GenerateRequestsPerDayPerProjectPerModel-FreeTier","quotaDimensions":{"location":"global","model":"gemini-2.0-flash-lite"}}]},{"@type":"type.googleapis.com/google.rpc.RetryInfo","retryDelay":"10s"}]
[ModelManager] üîÑ Failing over to: llama-3.3-70b-versatile (groq)

=== Result ===
Text Response: <function=dn_schoolscontroller_getschoolsbysenaiuser>{"city":"Diadema","state":"Sao Paulo"}</function>
Gathered Data: [
  {
    "tool": "dn_schoolscontroller_getschoolsbysenaiuser",
    "result": {
      "content": [
        {
          "type": "text",
          "text": "{\"data\":[],\"meta\":{\"currentPage\":1,\"itemsPerPage\":2000,\"totalPages\":0,\"itemCount\":0,\"totalItems\":0}}"
        },
        {
          "type": "text",
          "text": "\n[SYSTEM HINT]: The search returned NO results for \"Diadema, S√£o Paulo\". \n1. Try REMOVING accents (e.g. \"S√£o Paulo\" -> \"Sao Paulo\").\n2. Try UPPERCASE or lowercase.\n3. Try a broader search term.\nRETRY IMMEDIATELY with a modified argument."
        }
      ]
    }
  }
]
